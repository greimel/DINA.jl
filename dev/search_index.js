var documenterSearchIndex = {"docs":
[{"location":"","page":"Home","title":"Home","text":"CurrentModule = DINA","category":"page"},{"location":"#DINA","page":"Home","title":"DINA","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"","page":"Home","title":"Home","text":"This package uses DataDeps.jl to download the US distributional national accounts (DINA) dataset from Gabriel Zucman's website. The data are downloaded in bulk (<1GB) and stored in .julia/datadeps/dina/.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The dataset is described in Piketty, T, E. Saez and G. Zucman: Distributional National Accounts: Methods and Estimates for the United States, Quarterly Journal of Economics, 2018, 133 (2): 553-609.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The variables are described in this document the codebook at Gabriel Zucman's website.","category":"page"},{"location":"#Getting-the-micro-data-for-a-year","page":"Home","title":"Getting the micro data for a year","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using DINA, DataFrames\n\ntbl = get_dina(1980)\ndf80 = DataFrame(tbl)\n\nfirst(df80, 5)","category":"page"},{"location":"#Getting-the-decile-year-panel-for-selected-variables","page":"Home","title":"Getting the decile-year panel for selected variables","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using DINA\nimport CSV\n\ninc = :peinc\nwgt = :dweght\n\ndbt_var = [:ownermort, :rentalmort, :nonmort, :hwdeb]\nvar = [[:fiinc, :fninc, :ptinc, inc, :poinc, :ownerhome, :rentalhome]; dbt_var]\nbyvar = inc # compute deciles of `:peinc`\n\ndf = dina_quantile_panel(var, byvar, 10)\n\nfilename = joinpath(\".\", \"dina-aggregated.csv\") # hide\ndf |> CSV.write(filename) # hide\n\nfirst(df, 5)","category":"page"},{"location":"","page":"Home","title":"Home","text":"download","category":"page"},{"location":"#Some-plots","page":"Home","title":"Some plots","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using DataFrames, CairoMakie\nusing CairoMakie: AbstractPlotting.wong_colors\nusing LinearAlgebra: dot\n\nagg_df = let\n    df1 = select(df,\n\t    :group_id,\n\t    :age, :year, wgt, var...\n    )\n\t\t\t\n    df2 = combine(\n\t    groupby(df1, :year),\n\t    ([v, wgt] => ((x,w) -> dot(x,w)/sum(w)) => v for v in var)...\n    )\n\t\t\n    transform!(df2, ([d, inc] => ByRow(/) => string(d) * \"2inc\" for d in dbt_var)...)\nend\n\nlet d = agg_df\n\tfig = Figure()\n\t\n\t# Define Layout, Labels, Titles\n\tLabel(fig[1,1], \"Growth of Household-Debt-To-Income in the USA\", tellwidth = false)\n\taxs = [Axis(fig[2,1][1,i]) for i in 1:2]\n\t\n\tbox_attr = (color = :gray90, )\n\tlabel_attr = (padding = (3,3,3,3), )\n\t\n\tBox(fig[2,1][1,1, Top()]; box_attr...)\n\tLabel(fig[2,1][1,1, Top()], \"relative to 1980\"; label_attr...)\n\t\n\tBox(fig[2,1][1,2, Top()]; box_attr...)\n\tLabel(fig[2,1][1,2, Top()], \"relative to total debt in 1980\"; label_attr...)\n\t\n\t# Plot\n\ti80 = findfirst(d.year .== 1980)\n\t\n\tfor (i,dbt) in enumerate(dbt_var)\n\t\tvar = string(dbt) * \"2inc\"\n\t\tfor (j, fractionof) in enumerate([var, :hwdeb2inc])\n\t\t\tlines!(axs[j], d.year, d[!,var]/d[i80,fractionof], label = string(dbt), color = wong_colors[i])\n\t\tend\n\tend\n\n\t# Legend\n\tleg_attr = (orientation = :horizontal, tellheight = true, tellwidth = false)\n\tleg = Legend(fig[3,1], axs[1]; leg_attr...)\n\n    save(\"fig_dbt.svg\", fig) # hide\n\tfig\n    nothing # hide\nend","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: fig_dbt)","category":"page"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"","page":"Home","title":"Home","text":"Modules = [DINA]","category":"page"}]
}
